---
import { info } from "../../data/info";
import Button from "./Button.astro";
import { areas } from "../../data/serviceAreas";

---

<header class="fixed top-0 left-0 w-full z-50 bg-white md:bg-white shadow-md">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex items-center justify-between h-20">
      <!-- Logo -->
      <div class="flex-shrink-0">
        <a
          href="/"
          title="Bursa Yakƒ±n √áekici"
          class="text-xl font-bold text-red-600"
        >
          <img src="/images/ateslogo.png" alt="logo" class="w-40 h-15" />
        </a>
      </div>

      <!-- Men√º -->
      <nav class="hidden md:flex space-x-8 font-medium text-gray-700">
        <a
          href="/"
          title="Bursa Yakin Cekici - Ate≈ü Oto Kurtarma"
          class="hover:text-red-600 transition">Ana Sayfa</a
        >
        <a
          href="/hakkimizda"
          title="Bursa Yakin Cekici - Ate≈ü Oto Kurtarma Hakkƒ±mƒ±zda"
          class="hover:text-red-600 transition">Hakkƒ±mƒ±zda</a
        >
        <a
          href="/galeri"
          title="Bursa Yakin Cekici - Ate≈ü Oto Kurtarma Galeri"
          class="hover:text-red-600 transition">Galeri</a
        >
        <a
          href="/hizmetler"
          title="Bursa Yakin Cekici - Ate≈ü Oto Kurtarma Hizmetler"
          class="hover:text-red-600 transition">Hizmetler</a
        >
        
        <!-- Hizmet B√∂lgeleri Dropdown -->
        <div class="relative group">
          <button
            class="flex items-center gap-1 hover:text-red-600 transition focus:outline-none"
            type="button"
          >
            <span>Hizmet B√∂lgeleri</span>
            <svg class="w-4 h-4 transition-transform group-hover:rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
            </svg>
          </button>
          
          <!-- Dropdown Menu -->
          <div class="absolute left-0 top-full mt-2 w-80 bg-white rounded-lg shadow-lg border border-gray-200 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50">
            <div class="py-2">
              <!-- Ana Hizmet B√∂lgeleri Linki -->
              <a
                href="/hizmet-bolgeleri"
                title="Bursa Yakin Cekici - Ate≈ü Oto Kurtarma Hizmet B√∂lgeleri"
                class="block px-4 py-2 text-gray-700 hover:bg-red-50 hover:text-red-600 transition font-medium border-b border-gray-100"
              >
                <div class="flex items-center gap-2">
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                  </svg>
                  T√ºm Hizmet B√∂lgeleri
                </div>
              </a>
              
              <!-- ≈ûehirler ve ƒ∞l√ßeler Grid -->
              <div class="px-4 py-2 grid grid-cols-2 gap-4">
                <!-- ≈ûehirler -->
                <div>
                  <h4 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2">≈ûehirler</h4>
                  <div class="space-y-1">
                    {areas.filter(area => area.label === "Sehir").slice(0, 4).map((area) => (
                      <a
                        href={`/hizmet-bolgeleri/${area.slug}`}
                        title={`${area.name} Oto Kurtarma Hizmeti`}
                        class="block py-1 text-sm text-gray-600 hover:text-red-600 transition"
                      >
                        {area.name}
                      </a>
                    ))}
                    {areas.filter(area => area.label === "Sehir").length > 4 && (
                      <a
                        href="/hizmet-bolgeleri"
                        class="block py-1 text-xs text-red-600 hover:text-red-700 font-medium"
                      >
                        + Daha fazla...
                      </a>
                    )}
                  </div>
                </div>

                <!-- ƒ∞l√ßeler -->
                <div>
                  <h4 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2">ƒ∞l√ßeler</h4>
                  <div class="space-y-1">
                    {areas.filter(area => area.label === "ƒ∞lce").slice(0, 4).map((area) => (
                      <a
                        href={`/hizmet-bolgeleri/${area.slug}`}
                        title={`${area.name} Oto Kurtarma Hizmeti`}
                        class="block py-1 text-sm text-gray-600 hover:text-red-600 transition"
                      >
                        {area.name}
                      </a>
                    ))}
                    {areas.filter(area => area.label === "ƒ∞lce").length > 4 && (
                      <a
                        href="/hizmet-bolgeleri"
                        class="block py-1 text-xs text-blue-600 hover:text-blue-700 font-medium"
                      >
                        + Daha fazla...
                      </a>
                    )}
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <a
          href="/blog"
          title="Bursa Yakin Cekici - Ate≈ü Oto Kurtarma Blog"
          class="hover:text-red-600 transition">Blog</a
        >
        <a
          href="/iletisim"
          title="Bursa Yakin Cekici - Ate≈ü Oto Kurtarma ƒ∞leti≈üim"
          class="hover:text-red-600 transition">ƒ∞leti≈üim</a
        >
      </nav>

      <!-- "Hemen Ara" Butonu - sadece b√ºy√ºk ekran -->
      <div class="hidden lg:block">
        <Button
          variant="primary"
          size="md"
          href={`tel:${info.tel}`}
          class:list="flex items-center gap-2 px-4 py-2 bg-primary text-white transition-all duration-300 ease-in-out transform hover:scale-105 hover:shadow-[0_0_20px_rgba(255,255,255,0.3)] shadow-lg rounded-xl"
        >
          <span class="flex items-center gap-2 sm:gap-3">
            <svg
              class="w-5 h-5"
              fill="currentColor"
              viewBox="0 0 20 20"
            >
              <path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z" />
            </svg>
            {info.phone}
          </span>
        </Button>

      </div>

      <!-- Hamburger Men√º (Mobil) -->
      <div class="md:hidden">
        <button
          id="mobile-menu-button"
          class="text-gray-700 focus:outline-none"
        >
          <svg
            class="w-6 h-6"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M4 6h16M4 12h16M4 18h16"></path>
          </svg>
        </button>
      </div>
    </div>
  </div>

  <!-- Mobil Men√º -->
  <div id="mobile-menu" class="md:hidden hidden px-4 pb-4 bg-white shadow">
    <a
      href="/"
      title="Bursa Yakin Cekici - Ate≈ü Oto Kurtarma"
      class="block py-2 text-gray-700 hover:text-red-600">Ana Sayfa</a
    >
    <a
      href="/hakkimizda"
      title="Bursa Yakin Cekici - Ate≈ü Oto Kurtarma Hakkƒ±mƒ±zda"
      class="block py-2 text-gray-700 hover:text-red-600">Hakkƒ±mƒ±zda</a
    >
    <a
      href="/galeri"
      title="Bursa Yakin Cekici - Ate≈ü Oto Kurtarma Galeri"
      class="block py-2 text-gray-700 hover:text-red-600">Galeri</a
    >
    <a
      href="/hizmetler"
      title="Bursa Yakin Cekici - Ate≈ü Oto Kurtarma Hizmetler"
      class="block py-2 text-gray-700 hover:text-red-600">Hizmetler</a
    >
    
    <!-- Mobil Hizmet B√∂lgeleri Dropdown -->
    <div class="border-t border-gray-200 pt-2 mt-2">
      <button
        id="mobile-areas-button"
        class="flex items-center justify-between w-full py-2 text-gray-700 hover:text-red-600 transition"
        type="button"
      >
        <span>Hizmet B√∂lgeleri</span>
        <svg id="mobile-areas-icon" class="w-4 h-4 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
        </svg>
      </button>
      
      <!-- Mobil Dropdown ƒ∞√ßerik -->
      <div id="mobile-areas-content" class="hidden bg-gray-50 rounded-lg p-3 mt-2">
        <!-- Ana Link -->
        <a
          href="/hizmet-bolgeleri"
          title="Bursa Yakin Cekici - Ate≈ü Oto Kurtarma Hizmet B√∂lgeleri"
          class="block py-2 text-sm font-medium text-gray-700 hover:text-red-600 border-b border-gray-200 mb-2"
        >
          üìç T√ºm Hizmet B√∂lgeleri
        </a>

        <!-- ≈ûehirler ve ƒ∞l√ßeler Grid -->
        <div class="grid grid-cols-2 gap-3">
          <!-- ≈ûehirler -->
          <div>
            <h5 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2">≈ûehirler</h5>
            <div class="space-y-1">
              {areas.filter(area => area.label === "Sehir").slice(0, 3).map((area) => (
                <a
                  href={`/hizmet-bolgeleri/${area.slug}`}
                  title={`${area.name} Oto Kurtarma Hizmeti`}
                  class="block py-1 text-xs text-gray-600 hover:text-red-600 transition"
                >
                  {area.name}
                </a>
              ))}
              {areas.filter(area => area.label === "Sehir").length > 3 && (
                <a
                  href="/hizmet-bolgeleri"
                  class="block py-1 text-xs text-red-600 hover:text-red-700 font-medium"
                >
                  + Diƒüerleri...
                </a>
              )}
            </div>
          </div>

          <!-- ƒ∞l√ßeler -->
          <div>
            <h5 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2">ƒ∞l√ßeler</h5>
            <div class="space-y-1">
              {areas.filter(area => area.label === "ƒ∞lce").slice(0, 3).map((area) => (
                <a
                  href={`/hizmet-bolgeleri/${area.slug}`}
                  title={`${area.name} Oto Kurtarma Hizmeti`}
                  class="block py-1 text-xs text-gray-600 hover:text-blue-600 transition"
                >
                  {area.name}
                </a>
              ))}
              {areas.filter(area => area.label === "ƒ∞lce").length > 3 && (
                <a
                  href="/hizmet-bolgeleri"
                  class="block py-1 text-xs text-blue-600 hover:text-blue-700 font-medium"
                >
                  + Diƒüerleri...
                </a>
              )}
            </div>
          </div>
        </div>
      </div>
    </div>

    <a
      href="/blog"
      title="Bursa Yakin Cekici - Ate≈ü Oto Kurtarma Blog"
      class="block py-2 text-gray-700 hover:text-red-600">Blog</a
    >
    <a
      href="/iletisim"
      title="Bursa Yakin Cekici - Ate≈ü Oto Kurtarma ƒ∞leti≈üim"
      class="block py-2 text-gray-700 hover:text-red-600">ƒ∞leti≈üim</a
    >
  </div>

  <script>
    // Mobil hamburger men√º
    const button = document.getElementById("mobile-menu-button");
    const menu = document.getElementById("mobile-menu");

    if (button && menu) {
      button.addEventListener("click", () => {
        menu.classList.toggle("hidden");
      });
    }

    // Mobil hizmet b√∂lgeleri dropdown
    const mobileAreasButton = document.getElementById("mobile-areas-button");
    const mobileAreasContent = document.getElementById("mobile-areas-content");
    const mobileAreasIcon = document.getElementById("mobile-areas-icon");

    if (mobileAreasButton && mobileAreasContent && mobileAreasIcon) {
      mobileAreasButton.addEventListener("click", () => {
        mobileAreasContent.classList.toggle("hidden");
        mobileAreasIcon.classList.toggle("rotate-180");
      });
    }
  </script>

  <!-- CSS Styles -->
  <style>
    /* Dropdown animasyonu i√ßin */
    .group:hover .group-hover\:opacity-100 {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
    }
    
    .group .group-hover\:opacity-100 {
      transform: translateY(-10px);
      transition: all 0.2s ease;
    }
    
    /* Dropdown ok animasyonu */
    .group:hover .group-hover\:rotate-180 {
      transform: rotate(180deg);
    }

    /* Mobil dropdown ok animasyonu */
    .rotate-180 {
      transform: rotate(180deg);
    }
  </style>

  <!-- Script for desktop dropdown -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Desktop dropdown i√ßin click event ekle (opsiyonel)
      const dropdownButton = document.querySelector('.group button');
      const dropdownMenu = document.querySelector('.group > div:last-child');
      
      if (dropdownButton && dropdownMenu) {
        // Click dƒ±≈üƒ±nda bir yere tƒ±klandƒ±ƒüƒ±nda men√ºy√º kapat
        document.addEventListener('click', function(event) {
          const target = event.target;
          if (target instanceof Node && 
              !dropdownButton.contains(target) && 
              !dropdownMenu.contains(target)) {
            dropdownMenu.classList.add('opacity-0', 'invisible');
            dropdownMenu.classList.remove('opacity-100', 'visible');
          }
        });
      }
    });
  </script>
</header>